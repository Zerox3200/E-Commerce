{"version":3,"file":"static/js/480.22c93ea3.chunk.js","mappings":"yOAae,SAASA,IACpB,MAAM,gBAAEC,EAAe,UAAEC,IAAcC,EAAAA,EAAAA,YAAWC,EAAAA,IAC3CC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAcC,IAAmBF,EAAAA,EAAAA,WAAS,IAU3C,KAAEG,EAAI,UAAEC,EAAS,QAAEC,EAAO,QAAEC,IAAYC,EAAAA,EAAAA,UAAS,SARvCC,eACCC,EAAAA,EAAMC,IAAI,8CAA+C,CAClEC,QAAS,CACLC,MAAOC,EAAAA,EAAkBH,IAAI,YAElCI,OAAM,IAAMZ,GAAgB,MAGsC,CACrEa,oBAAoB,EACpBC,sBAAsB,EACtBC,QAAShB,IAEPiB,EAAiB,OAAJf,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KAAKgB,eACxBC,EAAoB,OAAJjB,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KAAKA,KAAKkB,eAChCC,EAAa,OAAJnB,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KAAKA,KAAKoB,IAEzBC,EAAmBhB,MAAOiB,EAAIC,KAClB,IAAVA,GAIJ3B,GAAW,SACLL,EAAgB+B,EAAIC,GAC1BrB,IAAUsB,MAAK,KACX5B,GAAW,GACX6B,EAAAA,GAAMC,QAAQ,6BAA6B,KAP3CD,EAAAA,GAAME,MAAM,mCAQd,EAeN,OAJAC,EAAAA,EAAAA,YAAU,KACN7B,GAAgB,EAAK,GACtB,KAGC8B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAChCC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,KAAIC,SAAC,cAClB9B,GAAaN,GAAUqC,EAAAA,EAAAA,KAACC,EAAAA,GAAS,CAC9BC,SAAS,EACTC,OAAO,KACPC,MAAM,KACNC,MAAM,UACNC,OAAO,IACPC,UAAU,qBACVC,aAAc,CAAC,EACfC,aAAa,eACZtC,GAAU6B,EAAAA,EAAAA,KAAA,QAAAD,SAAM,uBAA6B/B,GAAyC6B,EAAAA,EAAAA,MAAAa,EAAAA,SAAA,CAAAX,SAAA,EACvFF,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAM,uBAAqBhB,KAAkB,KAACiB,EAAAA,EAAAA,KAAA,UAC9CH,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAM,iBAAed,EAAc,SAC9B,OAAJjB,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KAAKA,KAAK2C,SAASC,KAAI,CAACtD,EAAMuD,KAAUhB,EAAAA,EAAAA,MAAA,OAC3CC,UAAU,qEAAoEC,SAAA,EAC9EF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAuBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,OAAKc,IAAKxD,EAAKyD,QAAQC,WAAYC,IAAI,MACvCpB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8DAA6DC,SAAA,EACxEF,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAIzC,EAAKyD,QAAQG,MAAMC,MAAM,KAAKC,OAAO,EAAG,GAAGC,KAAK,KAAK,QACzDxB,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAG,WAASzC,EAAKgE,MAAM,UACvBzB,EAAAA,EAAAA,MAAA,KAAG0B,QAASA,IAlCflD,WACjBT,GAAW,SACLJ,EAAU8B,GAChBpB,IAAUsB,MAAK,KACX5B,GAAW,EAAM,GACnB,EA6BoC4D,CAAalE,EAAKyD,QAAQzB,IAAIS,SAAA,EAACC,EAAAA,EAAAA,KAACyB,EAAAA,IAAU,IAAG,oBAGvE5B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yEAAwEC,SAAA,EACnFC,EAAAA,EAAAA,KAAA,QAAMuB,QAASA,IAAMlC,EAAiB/B,EAAKyD,QAAQzB,GAAIhC,EAAKiC,MAAQ,GAAGQ,SAAC,OACxEC,EAAAA,EAAAA,KAAA,KAAAD,SAAIzC,EAAKiC,SACTS,EAAAA,EAAAA,KAAA,QAAMuB,QAASA,IAAMlC,EAAiB/B,EAAKyD,QAAQzB,GAAIhC,EAAKiC,MAAQ,GAAGQ,SAAC,WAbvBc,MAiBzDb,EAAAA,EAAAA,KAAA,OAAKF,UAAU,WAAUC,UACrBC,EAAAA,EAAAA,KAAC0B,EAAAA,GAAI,CAACC,GAAE,aAAAC,OAAezC,GAAUW,UAAU,WAAUC,SAAC,qBArBLC,EAAAA,EAAAA,KAAA,QAAAD,SAAM,yBA0B3E,C","sources":["Pages/Cart/Cart.jsx"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios'\r\nimport './Cart.scss'\r\nimport { useQuery } from 'react-query'\r\nimport { reactLocalStorage } from 'reactjs-localstorage'\r\nimport { ThreeDots } from 'react-loader-spinner'\r\nimport { FaTrashAlt } from \"react-icons/fa\";\r\nimport { useContext, useEffect, useState } from 'react'\r\nimport { Carts } from '../../Context/CartContext'\r\nimport toast from 'react-hot-toast';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport default function Cart() {\r\n    const { UpdateQuantatiy, DeletCart } = useContext(Carts);\r\n    const [Loading, setLoading] = useState(false);\r\n    const [queryEnabled, setQueryEnabled] = useState(true);\r\n\r\n    const GetCart = async () => {\r\n        return await axios.get('https://ecommerce.routemisr.com/api/v1/cart', {\r\n            headers: {\r\n                token: reactLocalStorage.get(\"Token\")\r\n            }\r\n        }).catch(() => setQueryEnabled(false))\r\n    }\r\n\r\n    const { data, isLoading, refetch, isError } = useQuery(\"Carts\", GetCart, {\r\n        refetchOnReconnect: true,\r\n        refetchOnWindowFocus: true,\r\n        enabled: queryEnabled,\r\n    });\r\n    const CartNumber = data?.data.numOfCartItems;\r\n    const CarTotalPrice = data?.data.data.totalCartPrice;\r\n    const CartId = data?.data.data._id;\r\n\r\n    const HandleUpdateCart = async (id, count) => {\r\n        if (count === 0) {\r\n            toast.error(\"You can't make cart lower that 1\");\r\n            return;\r\n        };\r\n        setLoading(true)\r\n        await UpdateQuantatiy(id, count);\r\n        refetch().then(() => {\r\n            setLoading(false);\r\n            toast.success(\"Product Added successfully\")\r\n        })\r\n    }\r\n\r\n    const HandleDelete = async (id) => {\r\n        setLoading(true)\r\n        await DeletCart(id);\r\n        refetch().then(() => {\r\n            setLoading(false)\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        setQueryEnabled(true);\r\n    }, []);\r\n\r\n    return (\r\n        <div className='Cart container mt-3'>\r\n            <h1 className='h2'>Shop Cart</h1>\r\n            {isLoading || Loading ? <ThreeDots\r\n                visible={true}\r\n                height=\"80\"\r\n                width=\"80\"\r\n                color=\"#4fa94d\"\r\n                radius=\"9\"\r\n                ariaLabel=\"three-dots-loading\"\r\n                wrapperStyle={{}}\r\n                wrapperClass=\"CartLoader\"\r\n            /> : isError ? <span>Cart Number is : 0</span> : !data ? <span>Cart Number is : 0</span> : <>\r\n                <span>Number of carts is :{CartNumber}</span> <br />\r\n                <span>Total Price : {CarTotalPrice} EG</span>\r\n                {data?.data.data.products.map((Cart, index) => <div key={index}\r\n                    className=\"CartDesc w-100 row justify-content-between align-items-center mb-5\">\r\n                    <div className=\"CartDesc_pt1 col-md-8\">\r\n                        <img src={Cart.product.imageCover} alt=\"\" />\r\n                        <div className=\"CartDesc_pt1_Details d-flex flex-column row-gap-2 mx-3 pt-4\">\r\n                            <p>{Cart.product.title.split(' ').splice(0, 2).join(' ')} </p>\r\n                            <p>Price : {Cart.price} EG</p>\r\n                            <p onClick={() => HandleDelete(Cart.product.id)}><FaTrashAlt /> Remove</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"CartDesc_pt2 d-flex justify-content-center align-items-center col-md-4\">\r\n                        <span onClick={() => HandleUpdateCart(Cart.product.id, Cart.count + 1)}>+</span>\r\n                        <p>{Cart.count}</p>\r\n                        <span onClick={() => HandleUpdateCart(Cart.product.id, Cart.count - 1)}>-</span>\r\n                    </div>\r\n                </div>\r\n                )}\r\n                <div className=\"CheckOut\">\r\n                    <Link to={`/Shipping/${CartId}`} className='btn w-50'>Book Order</Link>\r\n                </div>\r\n            </>}\r\n        </div>\r\n    )\r\n}\r\n"],"names":["Cart","UpdateQuantatiy","DeletCart","useContext","Carts","Loading","setLoading","useState","queryEnabled","setQueryEnabled","data","isLoading","refetch","isError","useQuery","async","axios","get","headers","token","reactLocalStorage","catch","refetchOnReconnect","refetchOnWindowFocus","enabled","CartNumber","numOfCartItems","CarTotalPrice","totalCartPrice","CartId","_id","HandleUpdateCart","id","count","then","toast","success","error","useEffect","_jsxs","className","children","_jsx","ThreeDots","visible","height","width","color","radius","ariaLabel","wrapperStyle","wrapperClass","_Fragment","products","map","index","src","product","imageCover","alt","title","split","splice","join","price","onClick","HandleDelete","FaTrashAlt","Link","to","concat"],"sourceRoot":""}